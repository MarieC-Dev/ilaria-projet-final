<section class="recipeDetails">
    <div class="recipeIngredients recipeIngredients__mobile">
        <h3>Ingrédients</h3>

        <ul class="ingredientList">
            @for (recipeIngr of recipeIngredients; track recipeIngr.id) {
                <li class="ingredient">
                    {{ recipeIngr.quantity }} {{ recipeDetailService.getUnitIngredientLabel(recipeIngr.unit) }} {{ recipeIngr.ingredient.toLowerCase() }}
                </li>
            }
        </ul>
    </div>

    <div class="recipeSteps">
        <h3>Étapes de préparation</h3>

        <div class="stepsContainer">
            @for (step of recipeSteps; track $index) {
                <app-recipe-step
                    [nbStep]="$index + 1"
                    [description]="step.stepName" />
            }
        </div>
    </div>

    <nav class="recipeIngredientsTagsShare">
        <div class="recipeIngredients recipeIngredients__desktop">
            <h3>Ingrédients</h3>

            <ul class="ingredientList">
                @for (ingredient of recipeIngredients; track ingredient.id) {
                    <li class="ingredient">
                        <strong>{{ ingredient.quantity }}</strong> {{ recipeDetailService.getUnitIngredientLabel(ingredient.unit) }} de {{ ingredient.ingredient.toLowerCase() }}
                    </li>
                }
            </ul>
        </div>

        <div class="recipeTags recipeTags__desktop">
            <h3>Tags</h3>

            <ul class="tagList">
                <li *ngIf="!recipeTags">Il n'y a pas de tags pour cette recette</li>
                @for (tag of recipeTags; track tag.id) {
                    <li class="tag">{{ tagsTranslation(tag.tag) }}</li>
                }
            </ul>
        </div>

        <div class="recipeShare recipeShare__desktop">
            <h3>Partager la recette</h3>

            <ul class="socialNetworks">
                @for (social of socialNetworksList(); track $index) {
                    <app-social-networks
                        [link]="social.href"
                        [pathImg]="social.path"
                        [altImg]="social.altImg" />
                }
            </ul>
        </div>

        <div class="wrapperNavImage" *ngIf="recipeSteps.length >= 10 && commentsList.length > 0">
            <img src="recipe-detail-image.jpg" alt="détail de la recette image">
        </div>
    </nav>

    <hr class="dividingStepsComments">

    <div class="recipeComments">
        <h3>Commentaires</h3>

        <div class="recipeAverage" *ngIf="commentsList.length > 0">
            <img src="star.svg" alt="Icone étoile">
            <p>{{ getRecipeAverage() }} ({{ commentsList.length }} avis)</p>
        </div>

        @if (userConnected.isAuthenticated && commentsList.length > 0) {
            <a routerLink="commentaire" class="btn-bg-yellow writeCommentBtn">Écrire un commentaire</a>
        }

        <div class="commentsContainer" *ngIf="commentsList.length > 0">
            @for (comment of commentsList; track $index) {
                <app-recipe-comment
                    [userId]="comment.userId"
                    [date]="comment.created"
                    [note]="comment.note"
                    [text]="comment.commentText"
                />
            }
        </div>

        <div class="noCommentsContainer" *ngIf="commentsList.length === 0">
            <img src="comments-empty.svg" alt="Illustration pour les recettes sans commentaires">
            <div>
                <p>Cette recette n'a pas encore été notée. <br> Soyez le premier à laisser un commentaires !</p>
                <a routerLink="commentaire" class="btn-bg-yellow writeCommentBtn">Noter la recette</a>
            </div>
        </div>
    </div>

    <div class="recipeTags recipeTags__mobile">
        <h3>Tags</h3>

        <ul class="tagList">
            <li *ngIf="!recipeTags">Il n'y a pas de tags pour cette recette</li>
            @for (tag of recipeTags; track $index) {
                <li class="tag">{{ tag.tag }}</li>
            }
        </ul>
    </div>

    <div class="recipeShare recipeShare__mobile">
        <h3>Partager la recette</h3>

        <ul class="socialNetworks">
            @for (social of socialNetworksList(); track $index) {
                <app-social-networks
                    [link]="social.href"
                    [pathImg]="social.path"
                    [altImg]="social.altImg" />
            }
        </ul>
    </div>
</section>
